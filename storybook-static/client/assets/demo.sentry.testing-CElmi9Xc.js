import{r as y,j as s,d as ve,e as Ee}from"./main-fcwEEnio.js";import"./preload-helper-BXl3LOEh.js";const _=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,v=globalThis,A="10.17.0";function D(){return Z(v),v}function Z(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||A,e[A]=e[A]||{}}function Q(t,e,n=v){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[A]=r[A]||{};return i[t]||(i[t]=e())}const Xe="Sentry Logger ",oe={};function Ne(t){if(!("console"in v))return t();const e=v.console,n={},r=Object.keys(oe);r.forEach(i=>{const a=oe[i];n[i]=e[i],e[i]=a});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function He(){te().enabled=!0}function Ve(){te().enabled=!1}function Te(){return te().enabled}function qe(...t){ee("log",...t)}function Ze(...t){ee("warn",...t)}function Qe(...t){ee("error",...t)}function ee(t,...e){_&&Te()&&Ne(()=>{v.console[t](`${Xe}[${t}]:`,...e)})}function te(){return _?Q("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const g={enable:He,disable:Ve,isEnabled:Te,log:qe,warn:Ze,error:Qe},et=Object.prototype.toString;function ne(t,e){return et.call(t)===`[object ${e}]`}function J(t){return ne(t,"String")}function tt(t){return ne(t,"Object")}function nt(t){return ne(t,"RegExp")}function Ie(t){return!!(t?.then&&typeof t.then=="function")}function rt(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function G(t,e,n=!1){return J(t)?nt(e)?e.test(t):J(e)?n?t===e:t.includes(e):!1:!1}function C(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{_&&g.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function st(){const t=v;return t.crypto||t.msCrypto}function w(t=st()){let e=()=>Math.random()*16;try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"");t?.getRandomValues&&(e=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(e()&15)>>n/4).toString(16))}const we=1e3;function je(){return Date.now()/we}function it(){const{performance:t}=v;if(!t?.now||!t.timeOrigin)return je;const e=t.timeOrigin;return()=>(e+t.now())/we}let ce;function L(){return(ce??(ce=it()))()}function at(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||L(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:w()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Ce(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Ce(r[i],e[i],n-1));return r}function M(){return w()}function Re(){return w().substring(16)}const z="_sentrySpan";function F(t,e){e?C(t,z,e):delete t[z]}function K(t){return t[z]}const ot=100;class T{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:M(),sampleRand:Math.random()}}clone(){const e=new T;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,F(e,K(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&at(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof T?n.getScopeData():tt(n)?e:void 0,{tags:i,extra:a,user:o,contexts:d,level:l,fingerprint:u=[],propagationContext:p}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...a},this._contexts={...this._contexts,...d},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),u.length&&(this._fingerprint=u),p&&(this._propagationContext=p),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,F(this,void 0),this._attachments=[],this.setPropagationContext({traceId:M(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:ot;if(r<=0)return this;const i={timestamp:je(),...e,message:e.message?rt(e.message,2048):e.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:K(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Ce(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n?.event_id||w();if(!this._client)return _&&g.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r?.event_id||w();if(!this._client)return _&&g.warn("No client configured on scope - will not capture message!"),i;const a=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:a,...r,event_id:i},this),i}captureEvent(e,n){const r=n?.event_id||w();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(_&&g.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function ct(){return Q("defaultCurrentScope",()=>new T)}function dt(){return Q("defaultIsolationScope",()=>new T)}class lt{constructor(e,n){let r;e?r=e:r=new T;let i;n?i=n:i=new T,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return Ie(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function R(){const t=D(),e=Z(t);return e.stack=e.stack||new lt(ct(),dt())}function ut(t){return R().withScope(t)}function pt(t,e){const n=R();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function de(t){return R().withScope(()=>t(R().getIsolationScope()))}function ht(){return{withIsolationScope:de,withScope:ut,withSetScope:pt,withSetIsolationScope:(t,e)=>de(e),getCurrentScope:()=>R().getScope(),getIsolationScope:()=>R().getIsolationScope()}}function B(t){const e=Z(t);return e.acs?e.acs:ht()}function Y(){const t=D();return B(t).getCurrentScope()}function Ae(){const t=D();return B(t).getIsolationScope()}function ke(...t){const e=D(),n=B(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function I(){return Y().getClient()}const $="sentry.source",De="sentry.sample_rate",mt="sentry.previous_trace_sample_rate",X="sentry.op",H="sentry.origin",ft="sentry.measurement_unit",_t="sentry.measurement_value",le="sentry.custom_span_name",gt="sentry.profile_id",St="sentry.exclusive_time",bt=0,xt=1,yt=2,Oe="_sentryScope",Pe="_sentryIsolationScope";function vt(t){try{const e=v.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function Et(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function Nt(t,e,n){t&&(C(t,Pe,vt(n)),C(t,Oe,e))}function V(t){const e=t;return{scope:e[Oe],isolationScope:Et(e[Pe])}}const Tt="sentry-",It=/^sentry-/;function wt(t){const e=jt(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,a])=>{if(i.match(It)){const o=i.slice(Tt.length);r[o]=a}return r},{});if(Object.keys(n).length>0)return n}function jt(t){if(!(!t||!J(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=ue(n);return Object.entries(r).forEach(([i,a])=>{e[i]=a}),e},{}):ue(t)}function ue(t){return t.split(",").map(e=>e.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}const Ct=/^o(\d+)\./;function Rt(t,e=!1){const{host:n,path:r,pass:i,port:a,projectId:o,protocol:d,publicKey:l}=t;return`${d}://${l}${e&&i?`:${i}`:""}@${n}${a?`:${a}`:""}/${r&&`${r}/`}${o}`}function At(t){return t.match(Ct)?.[1]}function kt(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=At(n)),r}function Le(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Me=0,re=1;let pe=!1;function Dt(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:a,status:o,origin:d,links:l}=b(t);return{parent_span_id:a,span_id:e,trace_id:n,data:r,op:i,status:o,origin:d,links:l}}function Fe(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...i},attributes:a})=>({span_id:e,trace_id:n,sampled:r===re,attributes:a,...i}))}function j(t){return typeof t=="number"?he(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?he(t.getTime()):L()}function he(t){return t>9999999999?t/1e3:t}function b(t){if(Pt(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(Ot(t)){const{attributes:r,startTime:i,name:a,endTime:o,status:d,links:l}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:n,data:r,description:a,parent_span_id:u,start_timestamp:j(i),timestamp:j(o)||void 0,status:$e(d),op:r[X],origin:r[H],links:Fe(l)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function Ot(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Pt(t){return typeof t.getSpanJSON=="function"}function O(t){const{traceFlags:e}=t.spanContext();return e===re}function $e(t){if(!(!t||t.code===bt))return t.code===xt?"ok":t.message||"unknown_error"}const k="_sentryChildSpans",q="_sentryRootSpan";function Ue(t,e){const n=t[q]||t;C(e,q,n),t[k]?t[k].add(e):C(t,k,new Set([e]))}function Lt(t){const e=new Set;function n(r){if(!e.has(r)&&O(r)){e.add(r);const i=r[k]?Array.from(r[k]):[];for(const a of i)n(a)}}return n(t),Array.from(e)}function N(t){return t[q]||t}function Mt(){pe||(Ne(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),pe=!0)}function se(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||I()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function me(t){g.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function Ft(t,e){if(!e?.length||!t.description)return!1;for(const n of e){if($t(n)){if(G(t.description,n))return _&&me(t),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?G(t.description,n.name):!0,i=n.op?t.op&&G(t.op,n.op):!0;if(r&&i)return _&&me(t),!0}return!1}function $t(t){return typeof t=="string"||t instanceof RegExp}const Ut="production",Be="_frozenDsc";function W(t,e){C(t,Be,e)}function Bt(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i={environment:n.environment||Ut,release:n.release,public_key:r,trace_id:t,org_id:kt(e)};return e.emit("createDsc",i),i}function U(t){const e=I();if(!e)return{};const n=N(t),r=b(n),i=r.data,a=n.spanContext().traceState,o=a?.get("sentry.sample_rate")??i[De]??i[mt];function d(S){return(typeof o=="number"||typeof o=="string")&&(S.sample_rate=`${o}`),S}const l=n[Be];if(l)return d(l);const u=a?.get("sentry.dsc"),p=u&&wt(u);if(p)return d(p);const f=Bt(t.spanContext().traceId,e),h=i[$],m=r.description;return h!=="url"&&m&&(f.transaction=m),se()&&(f.sampled=String(O(n)),f.sample_rand=a?.get("sentry.sample_rand")??V(n).scope?.getPropagationContext().sampleRand.toString()),d(f),e.emit("createDsc",f,n),f}class ie{constructor(e={}){this._traceId=e.traceId||M(),this._spanId=e.spanId||Re()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Me}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function Yt(t,e=[]){return[t,e]}function Gt(t){return[{type:"span"},t]}function Wt(t,e){function n(m){return!!m.trace_id&&!!m.public_key}const r=U(t[0]),i=e?.getDsn(),a=e?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!a&&i&&{dsn:Rt(i)}},{beforeSendSpan:d,ignoreSpans:l}=e?.getOptions()||{},u=l?.length?t.filter(m=>!Ft(b(m),l)):t,p=t.length-u.length;p&&e?.recordDroppedEvent("before_send","span",p);const f=d?m=>{const S=b(m),E=d(S);return E||(Mt(),S)}:b,h=[];for(const m of u){const S=f(m);S&&h.push(Gt(S))}return Yt(o,h)}function Jt(t){if(!_)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=b(t),{spanId:i}=t.spanContext(),a=O(t),o=N(t),d=o===t,l=`[Tracing] Starting ${a?"sampled":"unsampled"} ${d?"root ":""}span`,u=[`op: ${n}`,`name: ${e}`,`ID: ${i}`];if(r&&u.push(`parent ID: ${r}`),!d){const{op:p,description:f}=b(o);u.push(`root ID: ${o.spanContext().spanId}`),p&&u.push(`root op: ${p}`),f&&u.push(`root description: ${f}`)}g.log(`${l}
  ${u.join(`
  `)}`)}function zt(t){if(!_)return;const{description:e="< unknown name >",op:n="< unknown op >"}=b(t),{spanId:r}=t.spanContext(),a=N(t)===t,o=`[Tracing] Finishing "${n}" ${a?"root ":""}span "${e}" with ID ${r}`;g.log(o)}function fe(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},i=r[ft],a=r[_t];typeof i=="string"&&typeof a=="number"&&(e[n.name]={value:a,unit:i})}),e}const _e=1e3;class ae{constructor(e={}){this._traceId=e.traceId||M(),this._spanId=e.spanId||Re(),this._startTime=e.startTimestamp||L(),this._links=e.links,this._attributes={},this.setAttributes({[H]:"manual",[X]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?re:Me}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=j(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute($,"custom"),this}end(e){this._endTime||(this._endTime=j(e),zt(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[X],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:$e(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[H],profile_id:this._attributes[gt],exclusive_time:this._attributes[St],measurements:fe(this._events),is_segment:this._isStandaloneSpan&&N(this)===this||void 0,segment_id:this._isStandaloneSpan?N(this).spanContext().spanId:void 0,links:Fe(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){_&&g.log("[Tracing] Adding an event to span:",e);const i=ge(n)?n:r||L(),a=ge(n)?{}:n||{},o={name:e,time:j(i),attributes:a};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=I();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===N(this)))return;if(this._isStandaloneSpan){this._sampled?Xt(Wt([this],e)):(_&&g.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(V(this).scope||Y()).captureEvent(r)}_convertSpanToTransaction(){if(!Se(b(this)))return;this._name||(_&&g.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=V(this),r=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const a=Lt(this).filter(p=>p!==this&&!Kt(p)).map(p=>b(p)).filter(Se),o=this._attributes[$];delete this._attributes[le],a.forEach(p=>{delete p.data[le]});const d={contexts:{trace:Dt(this)},spans:a.length>_e?a.sort((p,f)=>p.start_timestamp-f.start_timestamp).slice(0,_e):a,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:U(this)},request:r,...o&&{transaction_info:{source:o}}},l=fe(this._events);return l&&Object.keys(l).length&&(_&&g.log("[Measurements] Adding measurements to transaction event",JSON.stringify(l,void 0,2)),d.measurements=l),d}}function ge(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Se(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function Kt(t){return t instanceof ae&&t.isStandaloneSpan()}function Xt(t){const e=I();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function Ht(t,e,n=()=>{},r=()=>{}){let i;try{i=t()}catch(a){throw e(a),n(),a}return Vt(i,e,n,r)}function Vt(t,e,n,r){return Ie(t)?t.then(i=>(n(),r(i),i),i=>{throw e(i),n(),i}):(n(),r(t),t)}function qt(t,e,n){if(!se(t))return[!1];let r,i;typeof t.tracesSampler=="function"?(i=t.tracesSampler({...e,inheritOrSampleWith:d=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):d}),r=!0):e.parentSampled!==void 0?i=e.parentSampled:typeof t.tracesSampleRate<"u"&&(i=t.tracesSampleRate,r=!0);const a=Le(i);if(a===void 0)return _&&g.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`),[!1];if(!a)return _&&g.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,a,r];const o=n<a;return o||_&&g.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[o,a,r]}const Ye="__SENTRY_SUPPRESS_TRACING__";function P(t,e){const n=Ge();if(n.startSpan)return n.startSpan(t,e);const r=en(t),{forceTransaction:i,parentSpan:a,scope:o}=t,d=o?.clone();return ke(d,()=>rn(a)(()=>{const u=Y(),p=nn(u,a),h=t.onlyIfParent&&!p?new ie:Qt({parentSpan:p,spanArguments:r,forceTransaction:i,scope:u});return F(u,h),Ht(()=>e(h),()=>{const{status:m}=b(h);h.isRecording()&&(!m||m==="ok")&&h.setStatus({code:yt,message:"internal_error"})},()=>{h.end()})}))}function Zt(t,e){const n=Ge();return n.withActiveSpan?n.withActiveSpan(t,e):ke(r=>(F(r,t||void 0),e(r)))}function Qt({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!se()){const o=new ie;if(n||!t){const d={sampled:"false",sample_rate:"0",transaction:e.name,...U(o)};W(o,d)}return o}const i=Ae();let a;if(t&&!n)a=tn(t,r,e),Ue(t,a);else if(t){const o=U(t),{traceId:d,spanId:l}=t.spanContext(),u=O(t);a=be({traceId:d,parentSpanId:l,...e},r,u),W(a,o)}else{const{traceId:o,dsc:d,parentSpanId:l,sampled:u}={...i.getPropagationContext(),...r.getPropagationContext()};a=be({traceId:o,parentSpanId:l,...e},r,u),d&&W(a,d)}return Jt(a),Nt(a,r,i),a}function en(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=j(t.startTime),delete r.startTime,r}return n}function Ge(){const t=D();return B(t)}function be(t,e,n){const r=I(),i=r?.getOptions()||{},{name:a=""}=t,o={spanAttributes:{...t.attributes},spanName:a,parentSampled:n};r?.emit("beforeSampling",o,{decision:!1});const d=o.parentSampled??n,l=o.spanAttributes,u=e.getPropagationContext(),[p,f,h]=e.getScopeData().sdkProcessingMetadata[Ye]?[!1]:qt(i,{name:a,parentSampled:d,attributes:l,parentSampleRate:Le(u.dsc?.sample_rate)},u.sampleRand),m=new ae({...t,attributes:{[$]:"custom",[De]:f!==void 0&&h?f:void 0,...l},sampled:p});return!p&&r&&(_&&g.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",m),m}function tn(t,e,n){const{spanId:r,traceId:i}=t.spanContext(),a=e.getScopeData().sdkProcessingMetadata[Ye]?!1:O(t),o=a?new ae({...n,parentSpanId:r,traceId:i,sampled:a}):new ie({traceId:i});Ue(t,o);const d=I();return d&&(d.emit("spanStart",o),n.endTimestamp&&d.emit("spanEnd",o)),o}function nn(t,e){if(e)return e;if(e===null)return;const n=K(t);if(!n)return;const r=I();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?N(n):n}function rn(t){return t!==void 0?e=>Zt(t,e):e=>e()}function xe(t,e){return Y().captureException(t,void 0)}function ye(t,e){Ae().setContext(t,e)}const sn=Ee("src_routes_demo_sentry_testing_tsx--badServerFunc_createServerFn_handler"),an=ve({method:"GET"}).handler(sn),on=Ee("src_routes_demo_sentry_testing_tsx--goodServerFunc_createServerFn_handler"),cn=ve({method:"GET"}).handler(on);function un(){const[t,e]=y.useState({}),[n,r]=y.useState({}),[i,a]=y.useState({}),[o,d]=y.useState({}),[l,u]=y.useState(0),[p,f]=y.useState([]),[h,m]=y.useState(null),S=y.useRef("");y.useEffect(()=>{if(S.current||(S.current=new Date().toISOString()),l>0){const c=((new Date().getTime()-new Date(S.current).getTime())/1e3).toFixed(1);f(x=>[...x,`Step ${l}: +${c}s`])}},[l]);const E=c=>{navigator.clipboard.writeText(c),m(c),setTimeout(()=>m(null),2e3)},We=async()=>{e(c=>({...c,clientError:!0})),r(c=>({...c,clientError:!1})),a(c=>({...c,clientError:!0}));try{await P({name:"Client Error Flow Demo",op:"demo.client-error-flow"},async()=>{throw ye("demo",{feature:"client-error-demo",triggered_at:new Date().toISOString()}),new Error("Client-side error demonstration")})}catch(c){r(x=>({...x,clientError:!0})),d(x=>({...x,clientError:"demo.client-error-flow"})),xe(c)}finally{e(c=>({...c,clientError:!1}))}},Je=async()=>{e(c=>({...c,serverError:!0})),r(c=>({...c,serverError:!1})),a(c=>({...c,serverError:!0}));try{await P({name:"Server Error Flow Demo",op:"demo.server-error-flow"},async()=>{ye("demo",{feature:"server-error-demo",triggered_at:new Date().toISOString()}),await an()})}catch(c){r(x=>({...x,serverError:!0})),d(x=>({...x,serverError:"demo.server-error-flow"})),xe(c)}finally{e(c=>({...c,serverError:!1}))}},ze=async()=>{e(c=>({...c,client:!0})),a(c=>({...c,client:!0})),await P({name:"Client Operation",op:"demo.client"},async()=>{await new Promise(c=>setTimeout(c,1e3))}),d(c=>({...c,client:"demo.client"})),e(c=>({...c,client:!1}))},Ke=async()=>{e(c=>({...c,server:!0})),a(c=>({...c,server:!0}));try{await P({name:"Server Operation",op:"demo.server"},async()=>{await cn()}),d(c=>({...c,server:"demo.server"}))}finally{e(c=>({...c,server:!1}))}};return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
          }
          .animate-fade-out {
            animation: fadeOut 2s ease-out forwards;
          }
        `}}),s.jsx("div",{className:"min-h-[calc(100vh-32px)] text-white p-8",style:{backgroundImage:"radial-gradient(41.11% 49.93% at 50% 49.93%, #8d5494 0%, #563275 52.26%, #1f1633 100%)"},children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-8xl font-bold mb-4 text-white",children:"Sentry"}),s.jsxs("p",{className:"text-4xl font-semibold text-white",children:["Code ",s.jsx("span",{className:"inline-block -rotate-9",children:"breaks"}),", fix it faster"]})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-[#1C2333] rounded-lg border border-gray-800 p-6",children:s.jsxs("div",{className:"space-y-4 text-gray-300",children:[s.jsxs("p",{children:["The Sentry integration monitors this application across all routes; not just this one (we care about all tabs) using our"," ",s.jsx("code",{children:"@sentry/react"})," and ",s.jsx("code",{children:"@sentry/node"})," ","packages."]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Error Monitoring"}),s.jsx("div",{className:"text-sm text-gray-400",children:"across client side and server functions"})]}),s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Tracing and Spans"}),s.jsx("div",{className:"text-sm text-gray-400",children:"for client and server side performance"})]}),s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Session replay"}),s.jsx("div",{className:"text-sm text-gray-400",children:"real user session playback"})]}),s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Real-time alerts"}),s.jsx("div",{className:"text-sm text-gray-400",children:"because sleep is overrated anyway"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-[#1C2333] rounded-lg p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Client-Side Testing"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{u(c=>c+1),We()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Trigger Client-Side Error"})})})]}),n.clientError&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-2",children:s.jsxs("div",{className:"flex items-center text-red-400 text-sm",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("title",{children:"Red Warning Sign"}),s.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]}),"Client-side error captured and traced"]})}),s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${h===o.clientError?"scale-95":""}`,onClick:()=>E(o.clientError),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:o.clientError})]}),h===o.clientError&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{u(c=>c+1),ze()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Test Client-Side Span"})})})]}),i.client&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${t.client?"bg-blue-500 animate-pulse":"bg-green-500"}`}),s.jsx("div",{className:"ml-2 flex-1",children:s.jsx("div",{className:"h-1.5 bg-[#2D3555] rounded",children:s.jsx("div",{className:"h-full bg-blue-500 rounded transition-all duration-500",style:{width:t.client?"60%":"100%"}})})})]}),!t.client&&o.client&&s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${h===o.client?"scale-95":""}`,onClick:()=>E(o.client),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:o.client})]}),h===o.client&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]})]})]}),s.jsxs("div",{className:"bg-[#1C2333] rounded-lg p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Server-Side Testing"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{u(c=>c+1),Je()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Trigger Server Error"})})})]}),n.serverError&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center text-red-400 text-sm",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("title",{children:"Red Warning Sign"}),s.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]}),"Server-side error captured and traced"]})}),s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${h===o.serverError?"scale-95":""}`,onClick:()=>E(o.serverError),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:o.serverError})]}),h===o.serverError&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{u(c=>c+1),Ke()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Test server Trace"})})})]}),i.server&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${t.server?"bg-purple-500 animate-pulse":"bg-green-500"}`}),s.jsx("div",{className:"ml-2 flex-1",children:s.jsx("div",{className:"h-1.5 bg-[#2D3555] rounded",children:s.jsx("div",{className:"h-full bg-purple-500 rounded transition-all duration-500",style:{width:t.server?"60%":"100%"}})})})]}),!t.server&&o.server&&s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${h===o.server?"scale-95":""}`,onClick:()=>E(o.server),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:o.server})]}),h===o.server&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]})]})]})]})]})]})})]})}export{un as component};
